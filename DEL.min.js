/**
 * DOM Event Listener
 * @author  RubaXa  <trash@rubaxa.org>
 */
(function(o,f,n){function u(a,b){var c=a.relatedTarget,d=!1;if(c!==b){if(c){do if(c===b){d=!0;break}while((c=c.parentNode)&&c!==g.body)}return!d}return!1}function v(a,b){var c=w.call(arguments,2);if(x!==n)return x.apply(b,[a].concat(c));var d=function(){},e=function(){return b.apply(this instanceof d?this:a||o,c.concat(w.call(arguments)))};d[i]=a[i];e[i]=new d;return e}function y(a,b,c,d){if(a&&1==a.nodeType)if(f)f.event[b?"add":"remove"](a,c,d);else if(a[z])a[b?z:H](c,d,!1);else a[b?"attachEvent":
"detachEvent"]("on"+c,d)}function j(a,b){if("string"==typeof a||a&&1==a.nodeType)a=[a];if("forEach"in a)a.forEach(b);else if("length"in a)for(var c=0,d=a.length;c<d;c++)c in a&&b.call(this,a[c],c);else for(c in a)a.hasOwnProperty(c)&&b.call(this,a[c],c)}function I(a,b){if(b.id!==n)return a.id==b.id;if(b.tag===n||a.tagName==b.tag){if(b.mod!==n){var c=" "+a.className+" ",d=b.mod,e=d.length;if(1===e)return~c.indexOf(" "+d[0]+" ");for(;e--;)if(!~c.indexOf(" "+d[e]+" "))return!1}return!0}return!1}function A(a){this.type=
a.type;this.originalEvent=a;for(var b=e.props.length,c;b--;)c=e.props[b],this[c]=a[c];if(!this.target)this.target=this.srcElement||g;if(3===this.target.nodeType)this.target=this.target.parentNode;if(!this.relatedTarget&&this.fromElement)this.relatedTarget=this.fromElement===this.target?this.toElement:this.fromElement;if(null==this.pageX&&null!=this.clientX)b=this.target.ownerDocument||g,a=b.documentElement,b=b.body,this.pageX=this.clientX+(a&&a.scrollLeft||b&&b.scrollLeft||0)-(a&&a.clientLeft||b&&
b.clientLeft||0),this.pageY=this.clientY+(a&&a.scrollTop||b&&b.scrollTop||0)-(a&&a.clientTop||b&&b.clientTop||0);if(null==this.which&&(null!=this.charCode||null!=this.keyCode))this.which=null!=this.charCode?this.charCode:this.keyCode;if(!this.metaKey&&this.ctrlKey)this.metaKey=this.ctrlKey;if(!this.which&&void 0!==this.button)this.which=this.button&1?1:this.button&2?3:this.button&4?2:0}function r(a,b,c,d){b=b.replace(B,"");d={type:c,fn:d,sel:b,on:!0};if("#"==b.charAt(0))d.id=b.substr(1);else{b=b.split(".");
if(b[0]&&"*"!=b[0])d.tag=b[0].toUpperCase();if(1<b.length)d.mod=b.slice(1)}c=e.map[c]||c;(a[c]=a[c]||[]).push(d)}function C(a,b){j(b,function(c,d){"fn"!=d&&(y(a,!1,d,b.fn),c.length&&y(a,!0,d,b.fn))})}function D(a,b,c,d){if(b){if(c&&!d)d=c,c=b,b=a,a=g.body}else b=a,a=g.body;if("string"==typeof b){var k={};k["["+b+"] "+c]=d;b=k}j(a,function(a){var c=a.uniqId||(a.uniqId=++J),d=l[c]=l[c]||{},k;j(b,function(a,b){(k=b.match(E))?(b=b.replace(E,""),j(e.split(k[1]),function(c){j(b.split(","),function(b){r(d,
b,c,a)})})):"[object Object]"==q.call(a)?j(a,function(a,c){j(b.split(","),function(b){j(e.split(c),function(c){r(d,b,c,a)})})}):r(d,b,"click",a)});if(!d.fn)d.fn=function(b){a:{var b=e.fix(b||o.event),d,k,j=b.type,m=b.target,f,h=l[c][j],g;d=b.originalEvent;if(j===F&&!("delta"in b)){if(d.wheelDelta)b.delta=d.wheelDelta/120;if(d.detail)b.delta=-d.detail/3}if(h&&h.length){do if(1==m.nodeType)for(d=0,k=h.length;d<k;d++)if(f=h[d],f.on&&I(m,f)&&(g=e.special[f.type],g===n||g(b,m)))if(b.type=f.type,b.currentTarget=
m,!1===f.fn.call(m,b)&&(b.preventDefault(),b.stopPropagation()),b.type=j,b.isPropagationStopped())break a;while((m=m.parentNode)&&a!==m)}}};C(a,d)})}function h(a,b,c,d,f){if("[object Boolean]"==q.call(a))var i=f,f=a,a=b,b=c,c=d,d=i;if("string"==typeof a)d=c,c=b,b=a,a=g.body;"[object Function]"==q.call(c)||"[object Boolean]"==q.call(d)||c===n?(h(a,b,"",c,f),h(a,"",b,c,f)):j(a,function(a){if(a.uniqId&&l[a.uniqId]){var h=l[a.uniqId],g,i,o;j(h,function(p,l){if("fn"!==l){for(g=p.length;g--;)i=p[g],j(e.split(b),
function(a){if(o=(!a||a==i.type)&&(!d||d===i.fn)&&(!c||c.toLowerCase()==i.sel.toLowerCase()))f!==n?i.on=!f:p=p.slice(0,g).concat(p.slice(g+1))});h[l]=p;C(a,h)}})}})}var J=1,l={},i="prototype",w=Array[i].slice,q=Object[i].toString,x=Function[i].bind,K=/(^\s+|\s+$)/g,B=/\s+/g,E=/^\[([^\]]+)\]\s*/i,G=function(){},g=o.document,F="onmousewheel"in g?"mousewheel":"DOMMouseScroll",z="addEventListener",H="removeEventListener",s=function(){return!0},t=function(){return!1},e={props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),
fix:function(a){return new A(a)},map:{blur:"focusout",focus:"focusin",mouseenter:"mouseover",mouseleave:"mouseout",mousewheel:F},group:{hover:"mouseenter mouseleave",mouseclick:"mouseup mousedown"},special:{mouseenter:u,mouseleave:u},split:function(a){a=(" "+a+" ").replace(/\s([^\s]+)/,function(a,c){return" "+(e.group[c]||c)});return a.replace(K,"").split(B)},add:function(a,b,c){c?(e.map[a]=b,e.special[a]=c):e.group[a]=b}};A[i]={preventDefault:function(){this.isDefaultPrevented=s;var a=this.originalEvent;
a.preventDefault?a.preventDefault():a.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=s;var a=this.originalEvent;a.stopPropagation&&a.stopPropagation();a.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=s;this.stopPropagation()},isDefaultPrevented:t,isPropagationStopped:t,isImmediatePropagationStopped:t};if(f)e.fix=function(a){return a},e.props=f.event.props,e.special={},f.fn.listen=function(a,b,c){D(this,a,b,c);return this},f.fn.unlisten=
function(a,b,c){h(this,a,b,c);return this},f.fn.pauseListen=function(a,b,c){h(this,a,b,c,!0);return this},f.fn.unpauseListen=function(a,b,c){h(this,a,b,c,!1);return this};o.DEL={on:D,off:h,pause:v(G,h,!0),unpause:v(G,h,!1),event:e}})(this,this.jQuery);
