/**
 * DOM Event Listener
 * @author  RubaXa  <trash@rubaxa.org>
 */
(function(p,f,l){function u(a,b){var c=a.relatedTarget,d=!1;if(c!==b){if(c){do if(c===b){d=!0;break}while((c=c.parentNode)&&c!==n.body)}return!d}return!1}function v(a,b){var c=w.call(arguments,2);if(x!==l)return x.apply(b,[a].concat(c));var d=function(){},e=function(){return b.apply(this instanceof d?this:a||p,c.concat(w.call(arguments)))};d[h]=a[h];e[h]=new d;return e}function k(a){return"string"==typeof a}function y(a,b,c,d){if(a&&1==a.nodeType)if(f)f.event[b?"add":"remove"](a,c,d);else if(a[z])a[b?
z:H](c,d,!1);else a[b?"attachEvent":"detachEvent"]("on"+c,d)}function i(a,b){if(k(a)||a&&1==a.nodeType)a=[a];if("forEach"in a)a.forEach(b);else if("length"in a)for(var c=0,d=a.length;c<d;c++)c in a&&b.call(this,a[c],c);else for(c in a)a.hasOwnProperty(c)&&b.call(this,a[c],c)}function I(a,b){if(b.id!==l)return a.id==b.id;if(b.tag===l||a.tagName==b.tag){if(b.mod!==l){var c=" "+a.className+" ",d=b.mod,e=d.length;if(1===e)return~c.indexOf(" "+d[0]+" ");for(;e--;)if(!~c.indexOf(" "+d[e]+" "))return!1}return!0}return!1}
function A(a){this.type=a.type;this.originalEvent=a;for(var b=j.props.length,c;b--;)c=j.props[b],this[c]=a[c];this.target||(this.target=this.srcElement||n);3===this.target.nodeType&&(this.target=this.target.parentNode);!this.relatedTarget&&this.fromElement&&(this.relatedTarget=this.fromElement===this.target?this.toElement:this.fromElement);null==this.pageX&&null!=this.clientX&&(b=this.target.ownerDocument||n,a=b.documentElement,b=b.body,this.pageX=this.clientX+(a&&a.scrollLeft||b&&b.scrollLeft||0)-
(a&&a.clientLeft||b&&b.clientLeft||0),this.pageY=this.clientY+(a&&a.scrollTop||b&&b.scrollTop||0)-(a&&a.clientTop||b&&b.clientTop||0));if(null==this.which&&(null!=this.charCode||null!=this.keyCode))this.which=null!=this.charCode?this.charCode:this.keyCode;!this.metaKey&&this.ctrlKey&&(this.metaKey=this.ctrlKey);!this.which&&void 0!==this.button&&(this.which=this.button&1?1:this.button&2?3:this.button&4?2:0)}function r(a,b,c,d){b=b.replace(B,"");d={type:c,fn:d,sel:b,on:!0};b.match(J)?d.id=RegExp.$1:
(b=b.split("."),b[0]&&"*"!=b[0]&&(d.tag=b[0].toUpperCase()),1<b.length&&(d.mod=b.slice(1)));c=j.map[c]||c;(a[c]=a[c]||[]).push(d)}function C(a,b){var c;i(b,function(d,e){"fn"!=e&&(c="__on"+e,b.fn[c]&&!d.length&&(b.fn[c]=0,y(a,!1,e,b.fn)),!b.fn[c]&&d.length&&(b.fn[c]=1,y(a,!0,e,b.fn)))})}function D(a,b,c,d){k(a)&&!c?(d=b,b=a,c="*",a=l):!k(a)&&k(b)&&!d&&(d=c,c="*");b?c&&!d&&(d=c,c=b,b=a,a=l):(b=a,a=l);a=a||n.body;if(k(b)){var e={};e["["+b+"] "+c]=d;b=e}i(a,function(a){var c=a.uniqId||(a.uniqId=++K),
d=o[c]=o[c]||{},e;i(b,function(a,b){(e=b.match(E))?(b=b.replace(E,""),i(j.split(e[1]),function(c){i(b.split(","),function(b){r(d,b,c,a)})})):"[object Object]"==q.call(a)?i(a,function(a,c){i(b.split(","),function(b){i(j.split(c),function(c){r(d,b,c,a)})})}):r(d,b,"click",a)});d.fn||(d.fn=function(b){a:{var b=j.fix(b||p.event),d,e,i=b.type,m=b.target,f,g=o[c][i],h;d=b.originalEvent;i===F&&!("delta"in b)&&(d.wheelDelta&&(b.delta=d.wheelDelta/120),d.detail&&(b.delta=-d.detail/3));if(g&&g.length)for(;null!==
m&&m!==a;){if(1==m.nodeType)for(d=0,e=g.length;d<e;d++)if(f=g[d],f.on&&I(m,f)&&(h=j.special[f.type],h===l||h(b,m)))if(b.type=f.type,b.currentTarget=m,!1===f.fn.call(m,b)&&(b.preventDefault(),b.stopPropagation()),b.type=i,b.isPropagationStopped())break a;m=m.parentNode}}});C(a,d)})}function g(a,b,c,d,e){if("[object Boolean]"==q.call(a))var f=e,e=a,a=b,b=c,c=d,d=f;k(a)&&(d=c,c=b,b=a,a=n.body);"[object Function]"==q.call(c)||"[object Boolean]"==q.call(d)||c===l?(g(a,b,"",c,e),g(a,"",b,c,e)):i(a,function(a){if(a.uniqId&&
o[a.uniqId]){var f=o[a.uniqId],g,h,n;i(f,function(k,o){if("fn"!==o){for(g=k.length;g--;)h=k[g],i(j.split(b),function(a){if(n=(!a||a==h.type)&&(!d||d===h.fn)&&(!c||c.toLowerCase()==h.sel.toLowerCase()))e!==l?h.on=!e:k=k.slice(0,g).concat(k.slice(g+1))});f[o]=k;C(a,f)}})}})}var J=/#([^\.]+)/i,K=1,o={},h="prototype",w=Array[h].slice,q=Object[h].toString,x=Function[h].bind,L=/(^\s+|\s+$)/g,B=/\s+/g,E=/^\[([^\]]+)\]\s*/i,G=function(){},n=p.document,F="onmousewheel"in n?"mousewheel":"DOMMouseScroll",z=
"addEventListener",H="removeEventListener",s=function(){return!0},t=function(){return!1},j={props:"altKey,attrChange,attrName,bubbles,button,cancelable,charCode,clientX,clientY,ctrlKey,currentTarget,data,detail,eventPhase,fromElement,handler,keyCode,layerX,layerY,metaKey,newValue,offsetX,offsetY,pageX,pageY,prevValue,relatedNode,relatedTarget,screenX,screenY,shiftKey,srcElement,target,toElement,view,wheelDelta,which".split(","),fix:function(a){return new A(a)},map:{blur:"focusout",focus:"focusin",
mouseenter:"mouseover",mouseleave:"mouseout",mousewheel:F},group:{hover:"mouseenter mouseleave",mouseclick:"mouseup mousedown"},special:{mouseenter:u,mouseleave:u},split:function(a){a=(" "+a+" ").replace(/\s([^\s]+)/,function(a,c){return" "+(j.group[c]||c)});return a.replace(L,"").split(B)},add:function(a,b,c){c?(j.map[a]=b,j.special[a]=c):j.group[a]=b}};A[h]={preventDefault:function(){this.isDefaultPrevented=s;var a=this.originalEvent;a.preventDefault?a.preventDefault():a.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=
s;var a=this.originalEvent;a.stopPropagation&&a.stopPropagation();a.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=s;this.stopPropagation()},isDefaultPrevented:t,isPropagationStopped:t,isImmediatePropagationStopped:t};f&&(j.fix=function(a){return a},j.props=f.event.props,f.fn.listen=function(a,b,c){D(this,a,b,c);return this},f.fn.unlisten=function(a,b,c){g(this,a,b,c);return this},f.fn.pauseListen=function(a,b,c){g(this,a,b,c,!0);return this},f.fn.unpauseListen=
function(a,b,c){g(this,a,b,c,!1);return this});p.DEL={on:D,off:g,pause:v(G,g,!0),unpause:v(G,g,!1),event:j}})(this,this.jQuery);
