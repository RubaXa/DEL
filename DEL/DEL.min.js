/**
 * DOM Event Listener
 * @author  RubaXa  <trash@rubaxa.org>
 */
(function(n,e,p){function u(a,b){var c=a.relatedTarget,d=!1;if(c!==b){if(c){do if(c===b){d=!0;break}while((c=c.parentNode)&&c!==g.body)}return!d}return!1}function v(a,b){var c=w.call(arguments,2);if(x!==p)return x.apply(b,[a].concat(c));var d=function(){},f=function(){return b.apply(this instanceof d?this:a||n,c.concat(w.call(arguments)))};d[i]=a[i];f[i]=new d;return f}function y(a,b,c,d){if(a&&1==a.nodeType)if(e)e.event[b?"add":"remove"](a,c,d);else if(a[z])a[b?z:H](c,d,!1);else a[b?"attachEvent":
"detachEvent"]("on"+c,d)}function j(a,b){if("string"==typeof a||a&&1==a.nodeType)a=[a];if("forEach"in a)a.forEach(b);else if("length"in a)for(var c=0,d=a.length;c<d;c++)c in a&&b.call(this,a[c],c);else for(c in a)a.hasOwnProperty(c)&&b.call(this,a[c],c)}function I(a,b){if("id"in b)return a.id==b.id;if(!("tag"in b)||a.tagName==b.tag){if("mod"in b)for(var c=" "+a.className+" ",d=b.mod,f=d.length;f--;)if(!~c.indexOf(" "+d[f]+" "))return!1;return!0}return!1}function A(a){this.type=a.type;this.originalEvent=
a;for(var b=f.props.length,c;b--;)c=f.props[b],this[c]=a[c];if(!this.target)this.target=this.srcElement||g;if(3===this.target.nodeType)this.target=this.target.parentNode;if(!this.relatedTarget&&this.fromElement)this.relatedTarget=this.fromElement===this.target?this.toElement:this.fromElement;if(null==this.pageX&&null!=this.clientX)b=this.target.ownerDocument||g,a=b.documentElement,b=b.body,this.pageX=this.clientX+(a&&a.scrollLeft||b&&b.scrollLeft||0)-(a&&a.clientLeft||b&&b.clientLeft||0),this.pageY=
this.clientY+(a&&a.scrollTop||b&&b.scrollTop||0)-(a&&a.clientTop||b&&b.clientTop||0);if(null==this.which&&(null!=this.charCode||null!=this.keyCode))this.which=null!=this.charCode?this.charCode:this.keyCode;if(!this.metaKey&&this.ctrlKey)this.metaKey=this.ctrlKey;if(!this.which&&void 0!==this.button)this.which=this.button&1?1:this.button&2?3:this.button&4?2:0}function r(a,b,c,d){b=b.replace(B,"");d={type:c,fn:d,sel:b,on:!0};if("#"==b.charAt(0))d.id=b.substr(1);else{b=b.split(".");if(b[0]&&"*"!=b[0])d.tag=
b[0].toUpperCase();if(1<b.length)d.mod=b.slice(1)}c=f.map[c]||c;(a[c]=a[c]||[]).push(d)}function C(a,b){j(b,function(c,d){"fn"!=d&&(y(a,!1,d,b.fn),c.length&&y(a,!0,d,b.fn))})}function D(a,b,c,d){if(b){if(c&&!d)d=c,c=b,b=a,a=g.body}else b=a,a=g.body;if("string"==typeof b){var k={};k["["+b+"] "+c]=d;b=k}j(a,function(a){var c=a.uniqId||(a.uniqId=++J),d=l[c]=l[c]||{},k;j(b,function(a,b){(k=b.match(E))?(b=b.replace(E,""),j(f.split(k[1]),function(c){j(b.split(","),function(b){r(d,b,c,a)})})):"[object Object]"==
q.call(a)?j(a,function(a,c){j(b.split(","),function(b){j(f.split(c),function(c){r(d,b,c,a)})})}):r(d,b,"click",a)});if(!d.fn)d.fn=function(b){a:{var b=f.fix(b||n.event),d,k,j=b.type,m=b.target,e,h=l[c][j],g;d=b.originalEvent;if(j===F&&!("delta"in b)){if(d.wheelDelta)b.delta=d.wheelDelta/120;if(d.detail)b.delta=-d.detail/3}if(h&&h.length){do if(1==m.nodeType)for(d=0,k=h.length;d<k;d++)if(e=h[d],e.on&&I(m,e)&&(g=f.special[e.type],g===p||g(b,m)))if(b.type=e.type,b.currentTarget=m,!1===e.fn.call(m,b)&&
(b.preventDefault(),b.stopPropagation()),b.type=j,b.isPropagationStopped())break a;while((m=m.parentNode)&&a!==m)}}};C(a,d)})}function h(a,b,c,d,e){if("[object Boolean]"==q.call(a))var i=e,e=a,a=b,b=c,c=d,d=i;if("string"==typeof a)d=c,c=b,b=a,a=g.body;"[object Function]"==q.call(c)||"[object Boolean]"==q.call(d)||c===p?(h(a,b,"",c,e),h(a,"",b,c,e)):j(a,function(a){if(a.uniqId&&l[a.uniqId]){var h=l[a.uniqId],g,i,n;j(h,function(o,l){if("fn"!==l){for(g=o.length;g--;)i=o[g],j(f.split(b),function(a){if(n=
(!a||a==i.type)&&(!d||d===i.fn)&&(!c||c.toLowerCase()==i.sel.toLowerCase()))e!==p?i.on=!e:(console.log(n),o=o.slice(0,g).concat(o.slice(g+1)))});h[l]=o;C(a,h)}})}})}var J=1,l={},i="prototype",w=Array[i].slice,q=Object[i].toString,x=Function[i].bind,K=/(^\s+|\s+$)/g,B=/\s+/g,E=/^\[([^\]]+)\]\s*/i,G=function(){},g=n.document,F="onmousewheel"in g?"mousewheel":"DOMMouseScroll",z="addEventListener",H="removeEventListener",s=function(){return!0},t=function(){return!1},f={props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),
fix:function(a){return new A(a)},map:{blur:"focusout",focus:"focusin",mouseenter:"mouseover",mouseleave:"mouseout",mousewheel:F},group:{hover:"mouseenter mouseleave",mouseclick:"mouseup mousedown"},special:{mouseenter:u,mouseleave:u},split:function(a){a=(" "+a+" ").replace(/\s([^\s]+)/,function(a,c){return" "+(f.group[c]||c)});return a.replace(K,"").split(B)},add:function(a,b,c){c?(f.map[a]=b,f.special[a]=c):f.group[a]=b}};A[i]={preventDefault:function(){this.isDefaultPrevented=s;var a=this.originalEvent;
a.preventDefault?a.preventDefault():a.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=s;var a=this.originalEvent;a.stopPropagation&&a.stopPropagation();a.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=s;this.stopPropagation()},isDefaultPrevented:t,isPropagationStopped:t,isImmediatePropagationStopped:t};if(e)f.fix=function(a){return a},f.props=e.event.props,f.special={},e.fn.listen=function(a,b,c){D(this,a,b,c);return this},e.fn.unlisten=
function(a,b,c){h(this,a,b,c);return this},e.fn.pauseListen=function(a,b,c){h(this,a,b,c,!0);return this},e.fn.unpauseListen=function(a,b,c){h(this,a,b,c,!1);return this};n.DEL={on:D,off:h,pause:v(G,h,!0),unpause:v(G,h,!1),event:f}})(this,this.jQuery);
