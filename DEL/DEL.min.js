/**
 * DOM Event Listener
 * @author  RubaXa  <trash@rubaxa.org>
 */
(function(o,e,p){function u(a,b){var c=a.relatedTarget,d=!1;if(c!==b){if(c){do if(c===b){d=!0;break}while((c=c.parentNode)&&c!==k.body)}return!d}return!1}function v(a,b){var c=w.call(arguments,2);if(x!==p)return x.apply(b,[a].concat(c));var d=function(){},f=function(){return b.apply(this instanceof d?this:a||o,c.concat(w.call(arguments)))};d[h]=a[h];f[h]=new d;return f}function y(a,b,c,d){if(a&&1==a.nodeType)if(e)e.event[b?"add":"remove"](a,c,d);else if(a[z])a[b?z:G](c,d,!1);else a[b?"attachEvent":
"detachEvent"]("on"+c,d)}function i(a,b){if("string"==typeof a||a&&1==a.nodeType)a=[a];if("forEach"in a)a.forEach(b);else if("length"in a)for(var c=0,d=a.length;c<d;c++)c in a&&b.call(this,a[c],c);else for(c in a)a.hasOwnProperty(c)&&b.call(this,a[c],c)}function H(a,b){if("id"in b)return a.id==b.id;if(!("tag"in b)||a.tagName==b.tag){if("mod"in b)for(var c=" "+a.className+" ",d=b.mod,f=d.length;f--;)if(!~c.indexOf(" "+d[f]+" "))return!1;return!0}return!1}function A(a){this.type=a.type;this.originalEvent=
a;for(var b=j.props.length,c;b--;)c=j.props[b],this[c]=a[c];if(!this.target)this.target=this.srcElement||k;if(3===this.target.nodeType)this.target=this.target.parentNode;if(!this.relatedTarget&&this.fromElement)this.relatedTarget=this.fromElement===this.target?this.toElement:this.fromElement;if(null==this.pageX&&null!=this.clientX)b=this.target.ownerDocument||k,a=b.documentElement,b=b.body,this.pageX=this.clientX+(a&&a.scrollLeft||b&&b.scrollLeft||0)-(a&&a.clientLeft||b&&b.clientLeft||0),this.pageY=
this.clientY+(a&&a.scrollTop||b&&b.scrollTop||0)-(a&&a.clientTop||b&&b.clientTop||0);if(null==this.which&&(null!=this.charCode||null!=this.keyCode))this.which=null!=this.charCode?this.charCode:this.keyCode;if(!this.metaKey&&this.ctrlKey)this.metaKey=this.ctrlKey;if(!this.which&&void 0!==this.button)this.which=this.button&1?1:this.button&2?3:this.button&4?2:0}function r(a,b,c,d){b=b.replace(B,"");d={type:c,fn:d,sel:b,on:!0};if("#"==b.charAt(0))d.id=b.substr(1);else{b=b.split(".");if(b[0]&&"*"!=b[0])d.tag=
b[0].toUpperCase();if(1<b.length)d.mod=b.slice(1)}c=j.map[c]||c;(a[c]=a[c]||[]).push(d)}function C(a,b){i(b,function(c,d){"fn"!=d&&(y(a,!1,d,b.fn),c.length&&y(a,!0,d,b.fn))})}function D(a,b,c,d){if(b){if(c&&!d)d=c,c=b,b=a,a=k.body}else b=a,a=k.body;if("string"==typeof b){var f={};f["["+b+"] "+c]=d;b=f}i(a,function(a){var c=a.uniqId||(a.uniqId=++I),d=l[c]=l[c]||{},f;i(b,function(a,b){(f=b.match(E))?(b=b.replace(E,""),i(j.split(f[1]),function(c){i(b.split(","),function(b){r(d,b,c,a)})})):"[object Object]"==
q.call(a)?i(a,function(a,c){i(b.split(","),function(b){i(j.split(c),function(c){r(d,b,c,a)})})}):r(d,b,"click",a)});if(!d.fn)d.fn=function(b){a:{var b=j.fix(b||o.event),d,f,i=b.type,m=b.target,e,g=l[c][i],h;if(g&&g.length){do if(1==m.nodeType)for(d=0,f=g.length;d<f;d++)if(e=g[d],e.on&&H(m,e)&&(h=j.special[e.type],h===p||h(b,m)))if(b.type=e.type,b.currentTarget=m,!1===e.fn.call(m,b)&&(b.preventDefault(),b.stopPropagation()),b.type=i,b.isPropagationStopped())break a;while((m=m.parentNode)&&a!==m)}}};
C(a,d)})}function g(a,b,c,d,f){if("[object Boolean]"==q.call(a))var e=f,f=a,a=b,b=c,c=d,d=e;if("string"==typeof a)d=c,c=b,b=a,a=k.body;"[object Function]"==q.call(c)||"[object Boolean]"==q.call(d)||c===p?(g(a,b,"",c,f),g(a,"",b,c,f)):i(a,function(a){if(a.uniqId&&l[a.uniqId]){var e=l[a.uniqId],g,h,k;i(e,function(n,l){if("fn"!==l){for(g=n.length;g--;)h=n[g],i(j.split(b),function(a){if(k=(!a||a==h.type)&&(!d||d===h.fn)&&(!c||c.toLowerCase()==h.sel.toLowerCase()))f!==p?h.on=!f:(console.log(k),n=n.slice(0,
g).concat(n.slice(g+1)))});e[l]=n;C(a,e)}})}})}var I=1,l={},h="prototype",w=Array[h].slice,q=Object[h].toString,x=Function[h].bind,J=/(^\s+|\s+$)/g,B=/\s+/g,E=/^\[([^\]]+)\]\s*/i,F=function(){},k=o.document,z="addEventListener",G="removeEventListener",s=function(){return!0},t=function(){return!1},j={props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),
fix:function(a){return new A(a)},map:{blur:"focusout",focus:"focusin",mouseenter:"mouseover",mouseleave:"mouseout"},sh:{hover:"mouseenter mouseleave",mouseclick:"mouseup mousedown"},special:{mouseenter:u,mouseleave:u},split:function(a){a=(" "+a+" ").replace(/\s([^\s]+)/,function(a,c){return" "+(j.sh[c]||c)});return a.replace(J,"").split(B)}};A[h]={preventDefault:function(){this.isDefaultPrevented=s;var a=this.originalEvent;a.preventDefault?a.preventDefault():a.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=
s;var a=this.originalEvent;a.stopPropagation&&a.stopPropagation();a.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=s;this.stopPropagation()},isDefaultPrevented:t,isPropagationStopped:t,isImmediatePropagationStopped:t};if(e)j.fix=function(a){return a},j.props=e.event.props,j.special={},e.fn.listen=function(a,b,c){D(this,a,b,c);return this},e.fn.unlisten=function(a,b,c){g(this,a,b,c);return this},e.fn.pauseListen=function(a,b,c){g(this,a,b,c,!0);return this},
e.fn.unpauseListen=function(a,b,c){g(this,a,b,c,!1);return this};o.DEL={on:D,off:g,pause:v(F,g,!0),unpause:v(F,g,!1),event:j}})(this,this.jQuery);
